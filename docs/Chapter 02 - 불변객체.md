## 공유 참조와 사이드 이펙트

다음과 같이 새로운 객체를 참조형 변수에 대입하든, 또는 기존 객체를 참조형 변수에 대입하든, 다음 두 코드 모두 자바
문법상 정상인 코드이다.

```bash
Address b = new Address("서울") //새로운 객체 참조
Address b = a //기존 객체 공유 참조
```

참조값을 다른 변수에 대입하는 순간 여러 변수가 하나의 객체를 공유하게 된다. 
쉽게 이야기해서 객체의 공유를 막을 수 있는 방법이 없다

기본형 : 항상 값을 복사해서 대입하기 때문에 값이 절대로 공유되지 않는다.

참조형 : 참조값을 복사해서 대입하기 때문에 여러 변수에서 얼마든지 같은 객체를 공유할 수 있다.

<aside>
💡 여러 변수가 하나의 객체를 참조하는 공유 참조를 막을 수 있는 방법은 없다.
공유 참조로 발생하는 문제를 어떻게 해결할 수 있을까?
</aside>

## 불변 객체 도입

객체를 공유하는 것 자체는 문제가 아니다. 객체를 공유한다고
바로 사이드 이펙트가 발생하지는 않는다. ****문제의 직접적인 원인은 공유된 객체의 값을 변경한 것에 있다.**

객체 자체를 불변으로 만들면 됨!

setter 삭제

---

### 불변 객체의 값을 변경하려면 어떻게 할까?

기존 값에 새로운 값 더해서 새로운 객체를 만들어서 반환하면 된다.

불변 객체에서 변경과 관련된 메서드들은 보통 객체를 새로 만들어서 반환하기 때문에 ****꼭! 반환 값을 받아야 한다.****